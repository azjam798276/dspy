---
id: "rollout_20260102_155524_248864_golden"
generated_at: "2026-01-02T16:03:02.826688"
tags: ["shared", "auto-generated"]
---

## Problem
---
id: "20260102_launch_session"
difficulty: "medium"
tags: ["dashboard", "react", "mutation", "graphql", "modal"]
tech_stack: "React 18, TypeScript, Apollo Client"
---

# User Story
As an end user, I want to launch a new VDI session by selecting a template, so I can start a GPU-accelerated desktop.

# Context & Constraints
**GraphQL Mutation:**
```graphql
mutation CreateSession($input: VDISessionInput!) {
  createVDISession(input: $input) {
    metadata { name }
    status { phase, url }
  }
}

input VDISessionInput {
  user: String!
  template: String!
  resources: ResourceInput
}
```

**Template Query:**
```graphql
query GetTemplates {
  vditemplates {
    metadata { name }
    spec { displayName, description, image, resources { defaultGPU, defaultMemory } }
  }
}
```

**Launch Flow:**

## Solution
{
  "session_id": "28928263-5086-4630-ad96-0bff8f3159b5",
  "response": "Based on the `dashboard-developer` skill and the user story `20260102_launch_session`, I will implement the \"Launch Session\" feature.\n\n### Reasoning\n\n1.  **GraphQL Operations (`dashboard/src/graphql/operations.ts`)**:\n    *   We need `GET_TEMPLATES` to fetch available VDI templates (name, description, resources) for the selection UI.\n    *   We need `CREATE_SESSION` to execute the mutation defined in the story, accepting `VDISessionInput` (user, template).\n\n2.  **Launch Modal Component (`dashboard/src/components/LaunchModal.tsx`)**:\n    *   **State Management**: We need to track the `selectedTemplate` (string) to enable the \"Launch\" button.\n    *   **Data Fetching**: Use `useQuery(GET_TEMPLATES)` to populate the list dynamically.\n    *   **Mutation**: Use `useMutation(CREATE_SESSION)` to submit the request.\n    *   **UX/UI**:\n        *   Display a loading state while fetching templates.\n        *   Render templates in a selectable grid/list.\n        *   Show a spinner/loading text on the \"Launch\" button during mutation.\n        *   Error handling for both query (load failure) and mutation (creation failure).\n        *   Call `onSuccess` (to redirect/refresh) and `onClose` upon successful creation.\n\n3.  **Integration**: The component is designed to be embedded in the main Layout or triggered via a global modal context, accepting `isOpen`, `onClose`, and `currentUser` as props.\n\n```json\n[\n  {\n    \"action\": \"create_file\",\n    \"path\": \"dashboard/src/graphql/operations.ts\",\n    \"content\": \"import { gql } from '@apollo/client';\\n\\nexport const GET_TEMPLATES = gql`\\n  query GetTemplates {\\n    vditemplates {\\n      metadata {\\n        name\\n      }\\n      spec {\\n        displayName\\n        description\\n        image\\n        resources {\\n          defaultGPU\\n          defaultMemory\\n        }\\n      }\\n    }\\n  }\\n`;\\n\\nexport const CREATE_SESSION = gql`\\n  mutation CreateSession($input: VDISessionInput!) {\\n    createVDISession(input: $input) {\\n      metadata {\\n        name\\n      }\\n      status {\\n        phase\\n        url\\n      }\\n    }\\n  }\\n`;\"\n  },\n  {\n    \"action\": \"create_file\",\n    \"path\": \"dashboard/src/components/LaunchModal.tsx\",\n    \"content\": \"import React, { useState } from 'react';\\nimport { useQuery, useMutation } from '@apollo/client';\\nimport { GET_TEMPLATES, CREATE_SESSION } from '../graphql/operations';\\n\\ninterface LaunchModalProps {\\n  isOpen: boolean;\\n  onClose: () => void;\\n  currentUser: string;\\n  onSuccess: () => void;\\n}\\n\\nexport const LaunchModal: React.FC<LaunchModalProps> = ({ isOpen, onClose, currentUser, onSuccess }) => {\\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\\n  const { data, loading: loadingTemplates, error: errorTemplates } = useQuery(GET_TEMPLATES);\\n  const [createSession, { loading: cr

## Key Techniques
- JWT token handling
