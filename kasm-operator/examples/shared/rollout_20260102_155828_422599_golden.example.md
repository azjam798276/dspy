---
id: "rollout_20260102_155828_422599_golden"
generated_at: "2026-01-02T16:03:02.799521"
tags: ["shared", "auto-generated"]
---

## Problem
---
id: "20260102_dashboard_session_list"
difficulty: "medium"
tags: ["dashboard", "react", "graphql", "qlkube", "ui"]
tech_stack: "React 18, TypeScript, Apollo Client, qlkube"
---

# User Story
As an end user, I want a dashboard showing my active VDI sessions with status and connect buttons, so I can manage my desktop sessions.

# Context & Constraints
**GraphQL Query:**
```graphql
query GetMySessions($user: String!) {
  vdisessions(namespace: "vdi", labelSelector: {user: $user}) {
    metadata { name, creationTimestamp }
    spec { template, resources { gpu, memory } }
    status { phase, url, podName }
  }
}
```

**Component Structure:**
```tsx
const SessionList: React.FC = () => {
  const { data, loading, error } = useQuery(GET_SESSIONS, {
    variables: { user: currentUser.email },
  

## Solution
{
  "session_id": "c75b7e83-1b66-49f2-8a96-c9dd39bae751",
  "response": "```json\n{\n  \"reasoning\": \"I have designed the dashboard components based on the requirements. \\n\\n1.  **`queries.ts`**: Contains the `GetMySessions` query and `TerminateSession` mutation as specified in the context.\\n2.  **`SessionList.tsx`**: Fetches data using `useQuery` with `pollInterval: 5000`. It filters by `currentUser.email` (assuming a `currentUser` object is available in the scope or imported). It handles the loading state (skeleton) and empty state.\\n3.  **`SessionCard.tsx`**: Displays the session details (GPU, Memory, Age). It calculates the age from `creationTimestamp`. It provides a 'Connect' button (enabled only when 'Running' and URL exists) and a 'Terminate' button that executes the mutation.\",\n  \"code_patch\": \"diff --git a/dashboard/src/queries.ts b/dashboard/src/queries.ts\\nnew file mode 100644\\nindex 0000000..e69de29\\n--- /dev/null\\n+++ b/dashboard/src/queries.ts\\n@@ -0,0 +1,30 @@\\n+import { gql } from '@apollo/client';\\n+\\n+export const GET_MY_SESSIONS = gql`\\n+  query GetMySessions($user: String!) {\\n+    vdisessions(namespace: \\\"vdi\\\", labelSelector: {user: $user}) {\\n+      metadata { name, creationTimestamp }\\n+      spec { template, resources { gpu, memory } }\\n+      status { phase, url, podName }\\n+    }\\n+  }\\n+`;\\n+\\n+export const TERMINATE_SESSION = gql`\\n+  mutation TerminateSession($name: String!) {\\n+    deleteVDISession(name: $name) {\\n+      metadata { name }\\n+    }\\n+  }\\n+`;\\ndiff --git a/dashboard/src/components/SessionList.tsx b/dashboard/src/components/SessionList.tsx\\nnew file mode 100644\\nindex 0000000..e69de29\\n--- /dev/null\\n+++ b/dashboard/src/components/SessionList.tsx\\n@@ -0,0 +1,48 @@\\n+import React from 'react';\\n+import { useQuery } from '@apollo/client';\\n+import { GET_MY_SESSIONS } from '../queries';\\n+import { SessionCard } from './SessionCard';\\n+\\n+// Mock user context for this implementation as it was not provided\\n+const currentUser = { email: 'user@example.com' }; \\n+\\n+export const SessionList: React.FC = () => {\\n+  const { data, loading, error } = useQuery(GET_MY_SESSIONS, {\\n+    variables: { user: currentUser.email },\\n+    pollInterval: 5000,\\n+  });\\n+\\n+  if (loading && !data) return <div className=\\\"skeleton-loader\\\">Loading...</div>;\\n+  if (error) return <div className=\\\"error\\\">Error: {error.message}</div>;\\n+\\n+  const sessions = data?.vdisessions || [];\\n+\\n+  if (sessions.length === 0) {\\n+    return (\\n+      <div className=\\\"empty-state\\\">\\n+        <p>No active sessions</p>\\n+        <button className=\\\"btn-primary\\\">Launch Desktop</button>\\n+      </div>\\n+    );\\n+  }\\n+\\n+  return (\\n+    <div className=\\\"session-grid\\\">\\n+      {sessions.map((session: any) => (\\n+        <SessionCard key={session.metadata.name} session={session} />\\n+      ))}\\n+    </div>\\n+  );\\n+};\\ndiff --git a/dashboard

## Key Techniques
- JWT token handling
