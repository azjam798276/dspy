---
id: "rollout_20260102_155528_512864_golden"
generated_at: "2026-01-02T16:03:02.836377"
tags: ["shared", "auto-generated"]
---

## Problem
---
id: "20260102_launch_session"
difficulty: "medium"
tags: ["dashboard", "react", "mutation", "graphql", "modal"]
tech_stack: "React 18, TypeScript, Apollo Client"
---

# User Story
As an end user, I want to launch a new VDI session by selecting a template, so I can start a GPU-accelerated desktop.

# Context & Constraints
**GraphQL Mutation:**
```graphql
mutation CreateSession($input: VDISessionInput!) {
  createVDISession(input: $input) {
    metadata { name }
    status { phase, url }
  }
}

input VDISessionInput {
  user: String!
  template: String!
  resources: ResourceInput
}
```

**Template Query:**
```graphql
query GetTemplates {
  vditemplates {
    metadata { name }
    spec { displayName, description, image, resources { defaultGPU, defaultMemory } }
  }
}
```

**Launch Flow:**

## Solution
{
  "session_id": "01ce2c14-4c72-45e5-bb90-77d3c710fd30",
  "response": "**Reasoning:**\n\n1.  **Missing Directory:** The `dashboard` directory does not exist, so I will define the file paths under `dashboard/src/` to establish the frontend structure.\n2.  **Architecture:** I will adhere to the React + Apollo Client stack specified in the prompt.\n    -   **`dashboard/src/graphql/types.ts`**: Defines strict TypeScript interfaces (`VDISessionInput`, `VDITemplate`) to ensure type safety for the GraphQL payload and response.\n    -   **`dashboard/src/graphql/operations.ts`**: Consolidates the `GetTemplates` query and `CreateSession` mutation.\n    -   **`dashboard/src/components/LaunchModal.tsx`**: Implements the UI logic.\n        -   Uses `useQuery` to fetch templates.\n        -   Uses `useMutation` to trigger the session creation.\n        -   Manages local state for the `selectedTemplate` and UI feedback (loading/error).\n        -   Mocking \"current-user\" for the `user` input field as Authentication context is not provided in this specific story scope.\n3.  **UX Requirements:**\n    -   **Modal:** Implemented as a conditional render based on `isOpen`.\n    -   **Feedback:** Includes loading states (`loadingTemplates`, `isCreating`) and error handling logic to display messages.\n    -   **Selection:** Visual distinction for the selected template (logic included, styling classes assumed).\n\n```json\n{\n  \"dashboard/src/graphql/types.ts\": \"export interface ResourceInput {\\n  gpu?: number;\\n  memory?: string;\\n}\\n\\nexport interface VDISessionInput {\\n  user: string;\\n  template: string;\\n  resources?: ResourceInput;\\n}\\n\\nexport interface VDITemplate {\\n  metadata: {\\n    name: string;\\n  };\\n  spec: {\\n    displayName: string;\\n    description: string;\\n    image: string;\\n    resources: {\\n      defaultGPU: number;\\n      defaultMemory: string;\\n    };\\n  };\\n}\",\n  \"dashboard/src/graphql/operations.ts\": \"import { gql } from '@apollo/client';\\n\\nexport const GET_TEMPLATES = gql`\\n  query GetTemplates {\\n    vditemplates {\\n      metadata { name }\\n      spec { displayName, description, image, resources { defaultGPU, defaultMemory } }\\n    }\\n  }\\n`;\\n\\nexport const CREATE_SESSION = gql`\\n  mutation CreateSession($input: VDISessionInput!) {\\n    createVDISession(input: $input) {\\n      metadata { name }\\n      status { phase, url }\\n    }\\n  }\\n`;\",\n  \"dashboard/src/components/LaunchModal.tsx\": \"import React, { useState } from 'react';\\nimport { useQuery, useMutation } from '@apollo/client';\\nimport { GET_TEMPLATES, CREATE_SESSION } from '../graphql/operations';\\nimport { VDITemplate } from '../graphql/types';\\n\\ninterface LaunchModalProps {\\n  isOpen: boolean;\\n  onClose: () => void;\\n  onSuccess: () => void;\\n}\\n\\nexport const LaunchModal: React.FC<LaunchModalProps> = ({ isOpen, onClose, onSuccess }) => {\\n  const { data, loading: loadingTemplates, error: errorTemplates } = us

## Key Techniques
- async/await
- try/catch error handling
- JWT token handling
